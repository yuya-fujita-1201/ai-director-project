# AIの指示通りに進めたら3日目にアプリが動いた。自分は何も理解していない

## 「写真を撮ったら英語が出てくる」が現実になった

Day 3。

朝、コーヒーを淹れながらiPhoneのシミュレータでアプリを開いた。カメラボタンを押して、自分のマグカップを撮影。

3秒後、画面に英語フレーズが3つ並んだ。

> "I need my morning coffee to function."（朝コーヒーがないと動けない）

……動いてる。AIが写真を見て、ちゃんと関係のあるフレーズを返してきた。

Day 0で「こういうアプリを作ります」と宣言して、まだ3日しか経っていない。自分はまだ1行もコードを書いていない。なのに、アプリが動いている。

この不思議な感覚を、どう伝えればいいんだろう。

---

## Day 2のおさらい：「AIの目」がつながった日

前回の記事で環境構築まで紹介した。今回はその続きから。

Day 2で一番大きかったのは、AIとアプリの「接続」だ。

人間の言葉で言えば、「カメラで撮った写真をAIに送って、AIが英語フレーズを返す」という仕組みを作った。技術的にはOpenAI Vision APIという画像認識AIを使っている。

例によって、自分がやったことはClaude Code（エンジニア役AI）にこう頼んだだけ。

> 「Day 2の手順書を読んで、AI API連携を実装してください」

するとAIが勝手にAPIキーの設定ファイルを作り、画像を送信するコードを書き、受け取ったデータを解析してフレーズを表示する画面まで更新してくれた。

途中、JSONパースエラーというバグが出たらしいが、Claude Codeが自分で気づいて直していた。自分はただ見ていただけだ。

---

## Day 3：「使えるアプリ」に化けた日

Day 3は記事の見出し通り「UI仕上げ + お気に入り保存」の日だ。

ここまでのアプリは「写真を撮る → フレーズが出る」だけの一本道だった。使い捨ての電卓みたいなものだ。

Day 3で追加したのはこの3つ。

**お気に入り保存** ― 気に入ったフレーズにハートマークを付けて保存できる。後から見返せる。

**撮影履歴** ― 過去に撮った写真と生成されたフレーズを一覧で見られる。

**タブバー** ― 画面下部に「ホーム・履歴・お気に入り」の3つのタブがあって、切り替えられる。

文字にすると「ふーん」だけど、これがあるのとないのとでは全然違う。お気に入りに保存できるから「あとで復習しよう」と思える。履歴があるから「昨日は何を撮ったっけ」と振り返れる。

つまり、「1回使って終わり」のおもちゃから「毎日開きたくなる」アプリに変わった。

---

## 裏側ではSQLiteデータベースが動いている

「保存」するには、データをどこかに記録しておく仕組みが必要だ。

Claude Code（エンジニア）が選んだのはSQLiteという技術で、スマホの中に小さなデータベースを作る方法らしい。

Cowork（事務員）が事前に設計書を作っておいて、Claude Codeに渡したら、データベースの作成からデータの保存・読み出し・削除まで全部一気に実装してくれた。

コードは約400行。自分は1文字も書いていない。

ちなみに、ここまでの累計で約7,800行のコードが生成されている。7,800行。原稿用紙に換算すると約20枚分のコードを、AIが3日で書いた計算になる。

---

## 「理解していない」ことへの不安と開き直り

正直に書く。

自分はSQLiteが何をしているのか、ふんわりとしかわかっていない。「データを保存する箱」くらいの理解度だ。Riverpodという状態管理のライブラリに至っては、名前すら覚えられない。

最初はこの「理解していない」状態が不安だった。自分のアプリなのに、中身がブラックボックス。

でもDay 3まで来て、少し考え方が変わった。

料理に例えると、僕はレストランのオーナーだ。厨房で何が起きているかは、完璧には理解していない。でもシェフ（AI）を信頼して、メニュー（仕様）を決めて、味（動作確認）をチェックしている。

これ、実は普通のビジネスと同じなんじゃないか？

社長がコードを書く会社は少ない。大事なのは「何を作るか」を決めて、「ちゃんと動いているか」を確認することだ。

---

## Day 4：いよいよ「お金」の話

Day 4。課金機能の実装だ。

SnapEnglishのビジネスモデルはシンプルに決めていた。

- 無料：1日3回まで撮影可能
- 有料（月額400円）：無制限 + お気に入り保存

「自分がコードを書いていないアプリに、人はお金を払うのか？」

それを検証するのが、このプロジェクトの本当のゴールだ。

---

## AI、課金システムを組み上げる

課金の仕組みは「RevenueCat」というサービスを使う。

App Storeの課金処理は恐ろしく複雑だ。購入の検証、レシートの確認、サブスクリプションの状態管理——自分で全部書いたら数千行になるらしい。RevenueCatはそれを代わりにやってくれるサービスで、個人開発者の定番だそうだ。

Cowork（事務員AI）にDay 4の手順書を作らせたら、こういう設計になっていた。

**PurchaseService** ― RevenueCatとの通信を担当。プレミアム会員かどうかの判定、購入処理、復元処理を行う。

**UsageService** ― 「今日あと何回撮影できるか」を管理する。無料ユーザーは1日3回まで。プレミアムなら無制限。

**PaywallScreen** ― 課金画面。「プレミアムにアップグレードしませんか？」と表示する画面。

3つのサービスとPaywall画面を、Claude Codeに一気に実装してもらった。Day 4だけで約750行の新規コード。累計は**8,500行**を超えた。

---

## 意外な落とし穴：Appleは「380円」を許してくれない

ここで予想外のことが起きた。

もともと月額380円で設計していた。「ワンコイン以下でお手頃感がある」という戦略だ。

ところが、App Storeで価格を設定しようとしたら、**380円という選択肢が存在しなかった。**

Appleには「標準価格帯」というものがある。100円、200円、300円、400円、500円……と、決められた刻みでしか価格を設定できない。380円のような半端な金額は受け付けてくれないのだ。

これはAIも知らなかった。自分も知らなかった。

結局、最寄りの400円に変更した。20円の差だけど、「知らないと詰む」系の罠だと思う。こういう細かいルールがApp Store開発には無数にある。

---

## 「課金画面」にはAppleの暗黙のルールがある

もう一つ学んだことがある。

App Storeに課金アプリを出すには、Apple審査用の必須項目がいくつかある。

**「購入を復元する」ボタン** ― 機種変更した人が前の課金を引き継ぐためのボタン。これがないと審査で落ちるらしい。

**利用規約・プライバシーポリシーへのリンク** ― 課金画面のどこかにリンクを置く必要がある。

**サブスクリプションの自動更新に関する説明文** ― 「月額○円で自動更新されます」という説明を表示しないといけない。

Claude Code（エンジニアAI）はこれを全部知っていて、最初からPaywall画面に組み込んでくれていた。正直、自分が審査に出していたら気づかなかったと思う。

---

## App Store ConnectとRevenueCatの設定地獄

コードが書けても、それだけでは課金は動かない。

App Store Connect（Appleの管理画面）でサブスクリプション商品を登録し、RevenueCatのダッシュボードでその商品を紐付ける必要がある。

P8キーというファイルをAppleから発行してもらい、それをRevenueCatにアップロードする。商品IDを一字一句合わせる。Entitlement、Offering、Packageという概念を理解して正しく紐付ける。

ここはCoworkのブラウザ操作AIに手伝ってもらった。App Store ConnectもRevenueCatも、AIがブラウザを操作して設定してくれる。ただし、一部の操作（ファイルのアップロードなど）はセキュリティ上の理由で手動が必要だった。

感想を一言でいうと、**「コードを書くのは全体の半分。設定はもう半分」** だ。

---

## 4日目の終わりに思うこと

振り返ると、Day 1〜3は「作る」フェーズだった。カメラ、AI連携、保存機能。機能が増えるたびに「おお、動いた！」という感動があった。

Day 4は違う。「売る」フェーズの入り口だ。

月額400円。これが高いか安いかは、まだわからない。でも、AIが書いたコードで、AIが設定した課金システムで、見知らぬ誰かがお金を払ってくれるかもしれない。

コードは1行も書いていないけど、「自分のアプリ」だという感覚はどんどん強くなっている。不思議なものだ。

残りはDay 5（デザイン調整）、Day 6（App Store素材）、Day 7（審査提出）。折り返し地点を過ぎた。

---

*このプロジェクトの全過程は、記事①から順に読むと面白いです。初回はこちら→ [Claude Opus 4.6がリリースされたので、全部AIに任せて1週間でiOSアプリを作ってみることにした](https://note.com/marumi_works/n/n00a946fe68da)*

---

## この記事で起きたこと（チェックリスト）

- ✅ OpenAI Vision API連携完了 → 写真からフレーズ生成が動いた
- ✅ SQLiteデータベースで保存機能を追加
- ✅ お気に入り・履歴・タブバーの3画面追加
- ✅ RevenueCat課金システム実装（月額400円サブスクリプション）
- ✅ 無料ユーザー1日3回制限 + Paywall画面
- ✅ App Store Connect & RevenueCat設定完了
- ✅ 累計コード約8,500行（全てAI生成）
- 🔜 Day 5: デザイン調整 + オンボーディング
